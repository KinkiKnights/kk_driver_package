# 標準フォーマット
ID,DLC,Param1,Param2...
DLCにはParam1以降を指定




0x00~0x10を標準機能プロトコルとします。
- 0x00 : 非常停止信号
    - 非常停止基板への信号です。
    - DLCは1
    - フィールド
        - 1: 安全状態の時0x01とします。
- 0x01 : 非常停止状態
    - 非常停止基板の状態を示します。
    - DLCは2
    - フィールド
        - 1: 安全状態の時0x01とします。
        - 2: 物理EPB入力が安全状態の時を0x01とします。
- 0x02 : 基板接続情報
    - 各基板からHATに対して3秒周期で送信します
    - 帯域安定化のため、子IDによって送信タイミングをずらします。
    - 基板の接続状態を示します。
    - DLCは8
    - フィールド
        - 1,2: 基板ID
        - 3,4: コンパイル時に生成されるランダムシリアル(多重接続検出)
        - 5,6: 起動時間カウント
        - 7: 1周期処理時間(ms)
        - 8: 予備

# 制御機能プロトコル
0x100~0x17Fまでを制御機能プロトコルとします。
16進数の下1桁は基板の子IDとします。

- 0x100：PWMサーボ4つのコントロール
    - 8ポート基板は連番で2個IDを持つ
    - DLCは8
    - フィールド
        - 1,2(下位4ビット): 位置情報
        - 2(上位4ビット): 速度情報
- 0x110：ICSサーボ4つのコントロール
    - 最大 8IDまで(0x137)
    - ICS基板は全サーボ対応とする
    - DLCは8
    - フィールド(各ポート2フィールドづつ4ポート)
        - 1,2(下位4ビット): 位置情報
        - 2(上位4ビット): 速度情報
- 0x120 : モーター制御
    - 最大 8IDまで(0x147)
    - 拡張IDを使用
        - 拡張IDの下位12ビット使用
        - 各ポート6ビットで格納情報を表現
        - 格納情報割り当て
            - 0:情報無し
            - 1:Duty制御
            - 2:速度制御
            - 3:位置制御
            - 4:パラメータ設定(位置P)
            - 5:パラメータ設定(位置I)
            - 6:パラメータ設定(位置D)
            - 7:パラメータ設定(速度P)
            - 8:パラメータ設定(速度I)
            - 9:パラメータ設定(速度D)
            - 10:パラメータ設定(LIM+)
            - 11:パラメータ設定(LIM-)
            - 12:パラメータ設定(Duty+)
            - 13:パラメータ設定(Duty-)
            - 14:原点セット(オフセット値)
            - 15:原点セット(押当てDuty)
            - 16:パラメータ設定(押当て時最大秒間変化量)
    - DLCは8
    - フィールドは各ポート4バイト(int32)
        - Duty値のみ解釈は1バイト(パラメータ含む)


# フィードバックプロトコル
0x180~0x1A0までをフィードバックプロトコルとします。
16進数の下1桁は基板の子IDとします。

- 0x180：PWMサーボ4つの制御位置
    - DLCは8
    - フィールド(4ポート分各2バイト)
        - 1,2: 位置情報
- 0x190：ICSサーボ4つのコントロール
    - DLCは8
    - フィールド(4ポート分各2バイト)
        - 1,2: 位置情報
- 0x1A0 : エンコーダ
    - DLCは8
    - フィールド(2ポート分各4バイト)
        - 1,2,3,4: 位置情報
- 0x1B0 : Duty出力
    - DLCは4
    - フィールド(2ポート分各2バイト)
        - 1: Duty(int16)